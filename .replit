run = "uvicorn pyresolve.api.main:app --host 0.0.0.0 --port 8080 --reload"
entrypoint = "pyresolve/api/main.py"

hidden = [".pythonlibs", "__pycache__", ".pytest_cache"]

[nix]
channel = "stable-25_05"

[deployment]
run = ["sh", "-c", ". .venv/bin/activate && uvicorn pyresolve.api.main:app --host 0.0.0.0 --port 8080 --workers 2"]
build = ["sh", "-c", "python -m venv .venv && . .venv/bin/activate && pip install -e '.[api]'"]
deploymentTarget = "autoscale"

[[ports]]
localPort = 8080
externalPort = 80

[agent]
expertMode = true
